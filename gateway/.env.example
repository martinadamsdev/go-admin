# ============================================
# API Gateway Configuration Example
# ============================================

# --------------------------------------------
# Server Configuration
# --------------------------------------------
SERVER_PORT=8081
SERVER_HOST=0.0.0.0
SERVER_READ_TIMEOUT=15s
SERVER_WRITE_TIMEOUT=15s
SERVER_IDLE_TIMEOUT=60s
SERVER_SHUTDOWN_TIMEOUT=5s
SERVER_MAX_HEADER_BYTES=1048576
SERVER_ENABLE_TLS=false
SERVER_CERT_FILE=certs/server.crt
SERVER_KEY_FILE=certs/server.key

# --------------------------------------------
# Security Configuration
# --------------------------------------------
# API Keys (comma-separated)
SECURITY_API_KEYS=your-secret-key-1,your-secret-key-2

# CORS Settings
SECURITY_ENABLE_CORS=true
SECURITY_ALLOWED_ORIGINS=http://localhost:3000,https://example.com
SECURITY_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
SECURITY_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key,X-Request-ID

# IP Filtering (comma-separated, leave empty to disable)
SECURITY_IP_WHITELIST=
SECURITY_IP_BLACKLIST=

# Request Size Limit (bytes)
SECURITY_MAX_REQUEST_SIZE=10485760

# --------------------------------------------
# Rate Limiting Configuration
# --------------------------------------------
RATELIMIT_ENABLED=true
RATELIMIT_REQUESTS_PER_SECOND=100
RATELIMIT_BURST_SIZE=50
RATELIMIT_PER_IP=true
RATELIMIT_CLEANUP_INTERVAL=1m

# --------------------------------------------
# Cache Configuration
# --------------------------------------------
CACHE_ENABLED=true
CACHE_MAX_SIZE=1000
CACHE_TTL=5m
CACHE_CLEANUP_INTERVAL=1m

# --------------------------------------------
# Circuit Breaker Configuration
# --------------------------------------------
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60s
CIRCUIT_BREAKER_MAX_REQUESTS=1

# --------------------------------------------
# Backend Configuration
# --------------------------------------------
# Backend URLs (comma-separated)
BACKEND_URLS=http://localhost:8082,http://localhost:8083

# Health Check
BACKEND_HEALTH_CHECK_INTERVAL=10s
BACKEND_HEALTH_CHECK_TIMEOUT=2s
BACKEND_HEALTH_CHECK_PATH=/health

# Load Balancing Strategy
# Options: round-robin, least-conn, random
BACKEND_LOAD_BALANCE_STRATEGY=round-robin

# Connection Pool
BACKEND_MAX_IDLE_CONNS=100
BACKEND_MAX_CONNS_PER_HOST=100
BACKEND_IDLE_CONN_TIMEOUT=90s

# Retry Configuration
BACKEND_RETRY_ATTEMPTS=3
BACKEND_RETRY_DELAY=100ms

# --------------------------------------------
# Logging Configuration
# --------------------------------------------
# Log Level: debug, info, warn, error
LOG_LEVEL=info

# Log Format: json, text
LOG_FORMAT=json

# Log Output: stdout, stderr, file
LOG_OUTPUT=stdout

# Log File Settings (only used when LOG_OUTPUT=file)
LOG_FILE_PATH=/var/log/gateway.log
LOG_MAX_SIZE=100
LOG_MAX_BACKUPS=3
LOG_MAX_AGE=7

# --------------------------------------------
# Metrics Configuration
# --------------------------------------------
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
